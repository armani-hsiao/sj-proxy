:root {
  --ink:#060a14;--navy-deep:#0a0f1e;--navy:#0e1628;--navy-mid:#162040;--navy-up:#1e2d57;
  --border:rgba(45,79,212,0.25);--border2:rgba(75,107,232,0.50);
  --glow:rgba(45,79,212,0.35);--glow-sm:rgba(45,79,212,0.15);
  --royal:#2d4fd4;--royal-lt:#4a6be8;--sky:#6b8ef0;--sky-lt:#96aefd;
  --gold:#e8c86a;--gold-lt:#f5dfa0;--gold-dim:rgba(232,200,106,0.12);--gold-glow:rgba(232,200,106,0.3);
  --text:#dde4f8;--text2:#8a9bca;--text3:#4a5882;--text4:#2e3a5e;
  --green:#4ade80;--red:#f87171;--red-dim:rgba(248,113,113,0.12);
  --r:10px;--r-lg:16px;--r-xl:22px;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Noto Sans TC',sans-serif;background:var(--ink);color:var(--text);min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 80% 60% at 20% -10%,rgba(45,79,212,.18) 0%,transparent 60%),radial-gradient(ellipse 50% 40% at 90% 110%,rgba(45,79,212,.12) 0%,transparent 55%);pointer-events:none;z-index:0}
body::after{content:'';position:fixed;inset:0;background-image:radial-gradient(circle,rgba(150,174,253,.3) 1px,transparent 1px),radial-gradient(circle,rgba(150,174,253,.12) 1px,transparent 1px);background-size:80px 80px,37px 37px;background-position:0 0,40px 40px;pointer-events:none;z-index:0;opacity:.3;mask-image:radial-gradient(ellipse 100% 100% at 50% 50%,black 30%,transparent 100%)}
.screen{display:none;position:relative;z-index:1}
.screen.active{display:block}

/* LOGIN */
#login-screen{display:none;min-height:100vh;align-items:center;justify-content:center;position:relative;z-index:1}
#login-screen.active{display:flex}
.login-wrap{width:400px;padding:48px 44px;background:linear-gradient(145deg,rgba(22,32,64,.95),rgba(14,22,40,.98));border:1px solid var(--border2);border-radius:var(--r-xl);box-shadow:0 0 0 1px rgba(255,255,255,.04),0 0 60px rgba(45,79,212,.3),0 40px 80px rgba(0,0,0,.7);animation:loginReveal .5s cubic-bezier(.22,1,.36,1) both;position:relative;overflow:hidden}
.login-wrap::before{content:'';position:absolute;top:-60px;left:50%;transform:translateX(-50%);width:200px;height:120px;background:radial-gradient(ellipse,rgba(45,79,212,.5),transparent 70%);pointer-events:none}
.login-crest{text-align:center;margin-bottom:36px}
.crest-ring{display:inline-flex;align-items:center;justify-content:center;width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,rgba(45,79,212,.4),rgba(107,142,240,.15));border:1px solid var(--border2);margin-bottom:14px;box-shadow:0 0 24px var(--glow);font-size:28px;position:relative}
.crest-ring::after{content:'';position:absolute;inset:-3px;border-radius:50%;border:1px solid rgba(150,174,253,.15)}
.login-title{font-family:'Cinzel',serif;font-size:22px;font-weight:700;letter-spacing:.12em;color:var(--sky-lt);display:block}
.login-sub{font-size:11px;letter-spacing:.25em;color:var(--text3);margin-top:5px;text-transform:uppercase;display:block}
.login-sect{font-size:10px;font-weight:600;letter-spacing:.18em;color:var(--text3);text-transform:uppercase;margin-bottom:10px;display:block;font-family:'DM Mono',monospace}
.user-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px}
.user-btn{padding:11px 8px;background:rgba(22,32,64,.6);border:1px solid var(--border);border-radius:var(--r);color:var(--text2);font-family:'Noto Sans TC',sans-serif;font-size:13px;cursor:pointer;transition:all .15s;text-align:center;letter-spacing:.04em}
.user-btn:hover{background:rgba(45,79,212,.15);border-color:var(--border2);color:var(--text)}
.user-btn.selected{background:rgba(45,79,212,.25);border-color:var(--royal-lt);color:var(--sky-lt);box-shadow:0 0 14px var(--glow-sm),inset 0 1px 0 rgba(255,255,255,.08)}
.user-btn.admin-btn{grid-column:1/-1;background:var(--gold-dim);border-color:rgba(232,200,106,.2);color:var(--gold)}
.user-btn.admin-btn:hover,.user-btn.admin-btn.selected{background:rgba(232,200,106,.18);border-color:var(--gold);box-shadow:0 0 14px var(--gold-glow)}
.btn-login{width:100%;padding:14px;background:linear-gradient(135deg,var(--royal),var(--royal-lt));color:#fff;border:none;border-radius:var(--r);font-family:'Noto Sans TC',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;margin-top:22px;letter-spacing:.1em;box-shadow:0 4px 20px var(--glow);position:relative;overflow:hidden}
.btn-login::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent 40%,rgba(255,255,255,.12) 100%)}
.btn-login:hover:not(:disabled){box-shadow:0 4px 32px rgba(45,79,212,.55);transform:translateY(-1px)}
.btn-login:disabled{opacity:.35;cursor:default;transform:none}

/* TOPBAR */
.topbar{position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:0 24px;height:58px;background:rgba(6,10,20,.9);backdrop-filter:blur(16px);border-bottom:1px solid var(--border)}
.topbar-l{display:flex;align-items:center;gap:14px}
.wordmark{font-family:'Cinzel',serif;font-size:16px;font-weight:700;letter-spacing:.12em;color:var(--sky-lt);display:flex;align-items:center;gap:8px}
.wordmark span{font-size:18px}
.tdiv{width:1px;height:20px;background:var(--border)}
.user-chip{display:flex;align-items:center;gap:5px;font-size:11px;color:var(--text3);font-family:'DM Mono',monospace;padding:3px 10px;background:rgba(22,32,64,.6);border:1px solid var(--border);border-radius:20px;letter-spacing:.06em}
.chip-dot{width:6px;height:6px;border-radius:50%;background:var(--royal-lt);box-shadow:0 0 6px var(--royal-lt);animation:pulseDot 2s infinite}
.chip-dot.gold{background:var(--gold);box-shadow:0 0 6px var(--gold)}
.topbar-r{display:flex;align-items:center;gap:10px}
.cart-btn{display:flex;align-items:center;gap:7px;padding:7px 16px;background:rgba(22,32,64,.7);border:1px solid var(--border);border-radius:var(--r);color:var(--text2);cursor:pointer;font-size:13px;font-family:'Noto Sans TC',sans-serif;transition:all .15s;position:relative;white-space:nowrap}
.cart-btn:hover{background:rgba(45,79,212,.2);border-color:var(--border2);color:var(--sky-lt)}
.cart-badge{position:absolute;top:-7px;right:-7px;background:linear-gradient(135deg,var(--royal),var(--royal-lt));color:#fff;font-size:10px;font-weight:700;width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'DM Mono',monospace;box-shadow:0 0 8px var(--glow)}
.cart-badge.hidden{display:none}
.logout-btn{padding:6px 13px;background:transparent;border:1px solid var(--border);border-radius:8px;color:var(--text3);cursor:pointer;font-size:12px;font-family:'Noto Sans TC',sans-serif;transition:all .15s;white-space:nowrap}
.logout-btn:hover{border-color:var(--red);color:var(--red);background:var(--red-dim)}

/* TABS */
.tabs{display:flex;gap:2px;padding:16px 24px 0;border-bottom:1px solid var(--border);position:sticky;top:58px;background:rgba(6,10,20,.97);backdrop-filter:blur(8px);z-index:90}
.tab{padding:9px 20px;background:transparent;border:1px solid transparent;border-bottom:none;border-radius:8px 8px 0 0;color:var(--text3);cursor:pointer;font-size:13px;font-family:'Noto Sans TC',sans-serif;transition:all .15s;position:relative;bottom:-1px;letter-spacing:.04em}
.tab:hover{color:var(--text2)}
.tab.active{background:rgba(14,22,40,.98);border-color:var(--border);color:var(--sky-lt);border-bottom-color:rgba(14,22,40,.98)}

/* MAIN */
.main{padding:28px 24px;max-width:1140px;margin:0 auto}

/* EVENT CARDS */
.events-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:18px}
.event-card{background:linear-gradient(145deg,rgba(22,32,64,.7),rgba(14,22,40,.85));border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden;cursor:pointer;transition:all .22s;position:relative}
.event-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--royal-lt),transparent);opacity:0;transition:opacity .2s}
.event-card:hover{border-color:var(--border2);transform:translateY(-3px);box-shadow:0 12px 40px rgba(0,0,0,.45),0 0 0 1px rgba(107,142,240,.12)}
.event-card:hover::before{opacity:1}
.ec-head{padding:20px 22px 16px;border-bottom:1px solid var(--border)}
.ec-name{font-size:15px;font-weight:700;color:var(--text);margin-bottom:8px;line-height:1.3}
.ec-tags{display:flex;flex-wrap:wrap;gap:6px}
.ec-tag{font-size:10px;padding:2px 9px;border-radius:20px;font-family:'DM Mono',monospace;letter-spacing:.04em}
.tag-date{background:rgba(22,32,64,.8);color:var(--text3);border:1px solid var(--border)}
.tag-threshold{background:var(--gold-dim);border:1px solid rgba(232,200,106,.2);color:var(--gold)}
.tag-fx{background:rgba(107,142,240,.1);border:1px solid rgba(107,142,240,.2);color:var(--sky)}
.ec-body{padding:14px 22px}
.ec-desc{font-size:12px;color:var(--text3);line-height:1.6}
.ec-foot{padding:12px 22px;background:rgba(10,15,30,.5);display:flex;align-items:center;justify-content:space-between;border-top:1px solid var(--border)}
.ec-count{font-size:11px;color:var(--text3)}
.btn-enter{padding:6px 16px;background:linear-gradient(135deg,var(--royal),var(--royal-lt));border:none;border-radius:8px;color:#fff;font-size:12px;cursor:pointer;transition:all .15s;font-family:'Noto Sans TC',sans-serif;letter-spacing:.04em}
.btn-enter:hover{box-shadow:0 2px 12px var(--glow);transform:translateY(-1px)}

/* PRODUCTS VIEW */
.back-btn{display:inline-flex;align-items:center;gap:6px;background:transparent;border:1px solid var(--border);border-radius:var(--r);color:var(--text2);padding:7px 14px;cursor:pointer;font-size:13px;font-family:'Noto Sans TC',sans-serif;transition:all .15s;margin-bottom:22px}
.back-btn:hover{background:rgba(45,79,212,.1);border-color:var(--border2);color:var(--sky-lt)}
.pv-header{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px;margin-bottom:18px}
.pv-title{font-size:20px;font-weight:700;color:var(--text);margin-bottom:8px}
.threshold-bar{display:flex;align-items:center;gap:10px;padding:12px 18px;background:var(--gold-dim);border:1px solid rgba(232,200,106,.2);border-radius:var(--r);margin-bottom:20px;font-size:13px;color:var(--gold)}
.fx-chip{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;background:rgba(45,79,212,.15);border:1px solid var(--border2);border-radius:var(--r);font-size:12px;color:var(--sky-lt);font-family:'DM Mono',monospace}

/* Table */
.ptable-wrap{background:linear-gradient(145deg,rgba(14,22,40,.9),rgba(10,15,30,.95));border:1px solid var(--border);border-radius:var(--r-lg);overflow-x:auto;-webkit-overflow-scrolling:touch}
.ptable{width:100%;border-collapse:collapse}
.ptable th{padding:12px 18px;text-align:left;font-size:10px;font-weight:600;letter-spacing:.14em;color:var(--text3);text-transform:uppercase;background:rgba(10,15,30,.7);border-bottom:1px solid var(--border);font-family:'DM Mono',monospace}
.ptable td{padding:14px 18px;font-size:13px;border-bottom:1px solid rgba(45,79,212,.1);transition:background .1s}
.ptable tr:last-child td{border-bottom:none}
.ptable tr:hover td{background:rgba(45,79,212,.06)}
.price-orig{font-family:'DM Mono',monospace;color:var(--sky);font-size:13px}
.price-twd{font-family:'DM Mono',monospace;color:var(--gold);font-size:11px;margin-top:3px;opacity:.85}
.qty-ctrl{display:flex;align-items:center;gap:8px}
.qty-btn{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:rgba(22,32,64,.8);border:1px solid var(--border);border-radius:6px;color:var(--text2);cursor:pointer;font-size:14px;transition:all .1s}
.qty-btn:hover{background:rgba(45,79,212,.3);border-color:var(--border2);color:var(--sky-lt)}
.qty-num{font-family:'DM Mono',monospace;font-size:13px;min-width:22px;text-align:center;color:var(--text)}

/* Per-member qty rows */
.mem-qty-row{display:flex;align-items:center;gap:6px;padding-bottom:6px;}
.mem-label{font-size:12px;font-weight:600;color:var(--sky-lt);min-width:26px;text-align:center;padding:2px 5px;background:rgba(45,79,212,.2);border:1px solid rgba(107,142,240,.25);border-radius:5px;font-family:'DM Mono',monospace}

/* CART */
.cart-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.65);z-index:200;backdrop-filter:blur(5px)}
.cart-ov.open{display:block}
.cart-panel{position:fixed;top:0;right:0;width:390px;height:100%;background:linear-gradient(180deg,rgba(14,22,40,.99),rgba(10,15,30,.99));border-left:1px solid var(--border);z-index:201;display:flex;flex-direction:column;transform:translateX(100%);transition:transform .32s cubic-bezier(.25,.46,.45,.94);box-shadow:-20px 0 60px rgba(0,0,0,.5)}
.cart-ov.open .cart-panel{transform:translateX(0)}
.cart-head{padding:22px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.cart-head h3{font-size:16px;font-weight:700;display:flex;align-items:center;gap:8px;color:var(--sky-lt)}
.close-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:rgba(22,32,64,.6);border:1px solid var(--border);border-radius:8px;color:var(--text3);cursor:pointer;font-size:16px;transition:all .15s}
.close-btn:hover{background:var(--red-dim);border-color:var(--red);color:var(--red)}
.cart-items-list{flex:1;overflow-y:auto;padding:16px}
.cart-items-list::-webkit-scrollbar{width:4px}
.cart-items-list::-webkit-scrollbar-track{background:transparent}
.cart-items-list::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
.cart-item{padding:12px 14px;background:rgba(22,32,64,.4);border:1px solid var(--border);border-radius:var(--r);margin-bottom:8px;animation:fadeIn .2s ease}
.ci-top{display:flex;align-items:flex-start;gap:12px}
.ci-info{flex:1;min-width:0}
.ci-name{font-size:13px;font-weight:500;margin-bottom:2px;line-height:1.4}
.ci-ev{font-size:11px;color:var(--text3);margin-bottom:5px}
.ci-price{font-family:'DM Mono',monospace;font-size:11px;color:var(--sky-lt)}
.ci-twd{font-family:'DM Mono',monospace;font-size:10px;color:var(--gold);opacity:.8;margin-top:2px}
.ci-rm{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:var(--text3);cursor:pointer;border-radius:4px;font-size:14px;transition:all .1s;flex-shrink:0;margin-top:1px}
.ci-rm:hover{color:var(--red);background:var(--red-dim)}
/* 成員分佈區塊 */
.ci-mem-dist{margin-top:8px;padding-top:8px;border-top:1px solid rgba(45,79,212,.18);display:flex;flex-wrap:wrap;gap:5px}
.ci-mem-chip{display:inline-flex;align-items:center;gap:3px;padding:2px 8px;background:rgba(45,79,212,.18);border:1px solid rgba(107,142,240,.28);border-radius:20px;font-family:'DM Mono',monospace}
.ci-mem-chip .cmn{font-size:11px;color:var(--sky-lt)}
.ci-mem-chip .cmq{font-size:10px;color:var(--text3)}
.cart-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--text3);gap:12px}
.cart-empty .ico{font-size:40px;opacity:.3}
.cart-empty p{font-size:13px}
.cart-foot{padding:20px 24px;border-top:1px solid var(--border);background:rgba(10,15,30,.6)}
.sum-row{display:flex;justify-content:space-between;font-size:13px;color:var(--text2);padding:4px 0}
.sum-row.total{font-size:16px;font-weight:700;color:var(--text);padding-top:10px;margin-top:6px;border-top:1px solid var(--border)}
.sv{font-family:'DM Mono',monospace}
.card-badges{display:flex;flex-wrap:wrap;gap:6px;margin:10px 0 14px}
.card-badge{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;background:var(--gold-dim);border:1px solid rgba(232,200,106,.25);border-radius:20px;font-size:11px;color:var(--gold);font-family:'DM Mono',monospace}
.remark-inp{width:100%;padding:9px 12px;background:rgba(22,32,64,.5);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-family:'Noto Sans TC',sans-serif;font-size:13px;resize:none;margin-bottom:12px;min-height:60px;transition:border-color .15s}
.remark-inp:focus{outline:none;border-color:var(--border2)}
.remark-inp::placeholder{color:var(--text4)}
.btn-primary{width:100%;padding:13px;background:linear-gradient(135deg,var(--royal),var(--royal-lt));color:#fff;border:none;border-radius:var(--r);font-family:'Noto Sans TC',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;letter-spacing:.08em;box-shadow:0 4px 20px var(--glow)}
.btn-primary:hover:not(:disabled){box-shadow:0 4px 28px rgba(45,79,212,.55);transform:translateY(-1px)}
.btn-primary:disabled{opacity:.4;cursor:default;transform:none}

/* ADMIN */
.admin-card{background:linear-gradient(145deg,rgba(14,22,40,.85),rgba(10,15,30,.9));border:1px solid var(--border);border-radius:var(--r-lg);padding:26px;margin-bottom:22px}
.card-title{font-size:13px;font-weight:700;letter-spacing:.1em;color:var(--sky-lt);margin-bottom:22px;display:flex;align-items:center;gap:10px;text-transform:uppercase}
.card-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent)}
.fgrid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:16px}
.fgrid.g3{grid-template-columns:2fr 1fr 1fr}
.fg{display:flex;flex-direction:column;gap:6px}
.fg.full{grid-column:1/-1}
.fl{font-size:10px;font-weight:600;letter-spacing:.14em;color:var(--text3);text-transform:uppercase;font-family:'DM Mono',monospace}
.fi,.fsel{padding:9px 12px;background:rgba(22,32,64,.6);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-family:'Noto Sans TC',sans-serif;font-size:13px;transition:border-color .15s;width:100%}
.fi:focus,.fsel:focus{outline:none;border-color:var(--border2);background:rgba(22,32,64,.9)}
.fi::placeholder{color:var(--text4)}
.fsel{cursor:pointer}
option{background:var(--navy-mid)}
.prow-head{display:grid;grid-template-columns:52px 1.8fr 90px 100px 130px 100px 36px;gap:8px;margin-bottom:6px;padding:0 2px}
.prow-head span{font-size:10px;color:var(--text3);letter-spacing:.1em;text-transform:uppercase;font-family:'DM Mono',monospace}
.prow{display:grid;grid-template-columns:52px 1.8fr 90px 100px 130px 100px 36px;gap:8px;margin-bottom:8px;align-items:center}
.prow input{padding:8px 10px;background:rgba(22,32,64,.6);border:1px solid var(--border);border-radius:var(--r);color:var(--text);font-family:'Noto Sans TC',sans-serif;font-size:13px;transition:border-color .15s;width:100%}
.prow input:focus{outline:none;border-color:var(--border2)}
.prow input::placeholder{color:var(--text4)}
.rm-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:rgba(248,113,113,.08);border:1px solid rgba(248,113,113,.2);border-radius:6px;color:var(--red);cursor:pointer;font-size:15px;transition:all .1s}
.rm-btn:hover{background:rgba(248,113,113,.18)}
.add-row-btn{display:flex;align-items:center;gap:6px;padding:8px 14px;background:transparent;border:1px dashed var(--border2);border-radius:var(--r);color:var(--text3);cursor:pointer;font-size:13px;font-family:'Noto Sans TC',sans-serif;transition:all .15s;margin-top:4px}
.add-row-btn:hover{border-color:var(--royal-lt);color:var(--sky-lt);background:rgba(45,79,212,.1)}
.save-btn{padding:10px 28px;background:linear-gradient(135deg,var(--royal),var(--royal-lt));border:none;border-radius:var(--r);color:#fff;font-family:'Noto Sans TC',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;letter-spacing:.06em;box-shadow:0 4px 16px var(--glow-sm)}
.save-btn:hover{box-shadow:0 4px 24px var(--glow);transform:translateY(-1px)}
.fx-badge{font-size:10px;padding:2px 8px;background:rgba(107,142,240,.12);border:1px solid rgba(107,142,240,.2);border-radius:20px;color:var(--sky);font-family:'DM Mono',monospace}

/* ORDERS TABLE */
.otable-wrap{background:linear-gradient(145deg,rgba(14,22,40,.9),rgba(10,15,30,.95));border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden}
.otable{width:100%;border-collapse:collapse;font-size:13px}
.otable th{padding:12px 16px;text-align:left;font-size:10px;font-weight:600;letter-spacing:.14em;color:var(--text3);text-transform:uppercase;background:rgba(10,15,30,.6);border-bottom:1px solid var(--border);font-family:'DM Mono',monospace}
.otable td{padding:12px 16px;border-bottom:1px solid rgba(45,79,212,.08);vertical-align:top;color:var(--text2)}
.otable tr:last-child td{border-bottom:none}
.otable tr:hover td{background:rgba(45,79,212,.05)}
.ot-user{font-family:'DM Mono',monospace;color:var(--sky-lt);font-size:12px}
.ot-total{font-family:'DM Mono',monospace;color:var(--gold)}
.ot-date{font-size:11px;color:var(--text3)}
.ot-mem-tag{font-size:10px;padding:1px 6px;background:rgba(45,79,212,.15);border:1px solid rgba(107,142,240,.2);border-radius:4px;color:var(--sky);font-family:'DM Mono',monospace;display:inline-block;margin:2px 1px}
.ot-card{font-size:10px;padding:2px 8px;background:var(--gold-dim);border:1px solid rgba(232,200,106,.2);border-radius:20px;color:var(--gold);font-family:'DM Mono',monospace;display:inline-block;margin:2px}
.ot-items{line-height:1.9}

/* MISC */
.empty-state{text-align:center;padding:60px 20px;color:var(--text3)}
.empty-state .ico{font-size:48px;opacity:.25;display:block;margin-bottom:16px}
.empty-state p{font-size:14px}
.loading{display:inline-block;width:14px;height:14px;border:2px solid var(--border);border-top-color:var(--royal-lt);border-radius:50%;animation:spin .6s linear infinite;vertical-align:middle;margin-right:6px}

/* MODAL */
.modal-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:300;align-items:center;justify-content:center;backdrop-filter:blur(4px)}
.modal-ov.open{display:flex}
.modal-box{background:linear-gradient(145deg,rgba(22,32,64,.98),rgba(14,22,40,.99));border:1px solid var(--border2);border-radius:var(--r-lg);padding:28px;width:400px;max-width:90vw;animation:fadeUp .2s ease;box-shadow:0 20px 60px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.03)}
.modal-box h3{font-size:16px;font-weight:700;margin-bottom:10px;color:var(--sky-lt)}
.modal-box p{font-size:13px;color:var(--text2);line-height:1.6;margin-bottom:22px}
.modal-btns{display:flex;gap:10px;justify-content:flex-end}
.btn-ghost{padding:8px 18px;background:transparent;border:1px solid var(--border);border-radius:var(--r);color:var(--text2);cursor:pointer;font-size:13px;font-family:'Noto Sans TC',sans-serif;transition:all .15s}
.btn-ghost:hover{background:rgba(22,32,64,.8)}

/* TOAST */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:rgba(22,32,64,.95);border:1px solid var(--border2);border-radius:var(--r);padding:12px 22px;font-size:13px;color:var(--text);z-index:999;transition:transform .3s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 32px rgba(0,0,0,.5),0 0 16px var(--glow-sm);white-space:nowrap;backdrop-filter:blur(8px)}
.toast.show{transform:translateX(-50%) translateY(0)}
.toast.success{border-color:rgba(74,222,128,.35);color:var(--green)}
.toast.error{border-color:rgba(248,113,113,.35);color:var(--red)}

/* ANIMATIONS */
@keyframes loginReveal{from{opacity:0;transform:translateY(24px) scale(.97)}to{opacity:1;transform:none}}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:none}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulseDot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.7)}}

/* RESPONSIVE */
@media(max-width:640px){
  .cart-panel{width:100%}
  .fgrid,.fgrid.g3{grid-template-columns:1fr}
  .events-grid{grid-template-columns:1fr}
  .main{padding:16px}
  .tabs{padding:12px 16px 0;overflow-x:auto}
  .prow-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
  .prow-head,.prow{grid-template-columns:52px 140px 80px 80px 110px 100px 36px;min-width:615px}
  /* 商品表格手機版 */
  .ptable{min-width:480px}
  /* 訂單表格手機版：隱藏次要欄，關鍵欄保留 */
  .otable-wrap{overflow-x:auto}
  .otable{min-width:0}
  .otable th.hide-m,.otable td.hide-m{display:none}
  /* 訂單 card 模式 */
  .o-mobile-card{display:block;padding:12px 14px;background:rgba(22,32,64,.4);border:1px solid var(--border);border-radius:var(--r);margin-bottom:8px}
  .o-mc-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:4px;gap:8px}
  .o-mc-label{font-size:10px;color:var(--text3);min-width:36px;flex-shrink:0}
  .o-mc-val{font-size:12px;color:var(--text2);text-align:right;flex:1;min-width:0;word-break:break-word}
}

/* PRODUCT IMAGE */
.pimg-wrap{position:relative;width:44px;height:44px;flex-shrink:0}
.pimg-thumb{width:44px;height:44px;object-fit:cover;border-radius:6px;border:1px solid var(--border);cursor:pointer;transition:opacity .15s;display:block}
.pimg-thumb:hover{opacity:.8}
.pimg-empty{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:1px dashed var(--border);border-radius:6px;color:var(--text4);font-size:18px;cursor:pointer;transition:all .15s;background:rgba(22,32,64,.3)}
.pimg-empty:hover{border-color:var(--border2);color:var(--text3);background:rgba(45,79,212,.1)}
.pimg-has{display:flex;flex-direction:column;align-items:center;gap:3px}
.pimg-acts{display:flex;gap:3px;margin-top:2px}
.pimg-act{font-size:9px;padding:1px 5px;border-radius:4px;cursor:pointer;border:1px solid var(--border);background:rgba(22,32,64,.6);color:var(--text3);font-family:'Noto Sans TC',sans-serif;transition:all .1s;white-space:nowrap}
.pimg-act:hover{border-color:var(--border2);color:var(--sky-lt)}
.pimg-act.del:hover{border-color:var(--red);color:var(--red);background:var(--red-dim)}
.pimg-spinner{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(10,15,30,.7);border-radius:6px}
/* LIGHTBOX */
.lb-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:500;align-items:center;justify-content:center;backdrop-filter:blur(6px);cursor:zoom-out}
.lb-ov.open{display:flex}
.lb-img{max-width:90vw;max-height:88vh;border-radius:var(--r);box-shadow:0 20px 80px rgba(0,0,0,.8);object-fit:contain}
.lb-close{position:fixed;top:18px;right:22px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:rgba(22,32,64,.8);border:1px solid var(--border);border-radius:50%;color:var(--text2);cursor:pointer;font-size:18px;transition:all .15s}
.lb-close:hover{background:var(--red-dim);border-color:var(--red);color:var(--red)}
/* ptable 加圖欄 */
.ptable td:first-child{vertical-align:middle}